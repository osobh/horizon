# StratoSwarm Web Interfaces Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Primary node IP address (auto-detected if not set)
STRATOSWARM_HOST_IP=192.168.1.4

# External/public IP for remote access (optional)
STRATOSWARM_PUBLIC_IP=

# Network interface to bind services (auto-detected if not set)
STRATOSWARM_NETWORK_INTERFACE=eth0

# Allow external connections (true for demo/production, false for local dev)
STRATOSWARM_ALLOW_EXTERNAL=true

# ============================================================================
# WEB INTERFACE PORTS
# ============================================================================

# Visual Editor
VISUAL_EDITOR_PORT=8080
VISUAL_EDITOR_FRONTEND_PORT=3000
VISUAL_EDITOR_HOST=0.0.0.0

# API Endpoints
GRAPHQL_PORT=8080
WEBSOCKET_PORT=8080
REST_API_PORT=8080

# ============================================================================
# MONITORING STACK PORTS
# ============================================================================

# Grafana Dashboard
GRAFANA_PORT=3000
GRAFANA_HOST=0.0.0.0
GRAFANA_PASSWORD=admin
GRAFANA_ALLOW_SIGNUP=false

# Prometheus Metrics
PROMETHEUS_PORT=9091
PROMETHEUS_HOST=0.0.0.0
PROMETHEUS_RETENTION_TIME=7d

# Loki Logs
LOKI_PORT=3100
LOKI_HOST=0.0.0.0

# ============================================================================
# SWARMLET NODE CONFIGURATION
# ============================================================================

# Main Swarmlet API
SWARMLET_API_PORT=8080
SWARMLET_API_HOST=0.0.0.0
SWARMLET_METRICS_PORT=9090

# Node identification
SWARMLET_NODE_NAME=node-primary
SWARMLET_NODE_ID=
SWARMLET_CLUSTER_NAME=stratoswarm-demo

# ============================================================================
# GPU SERVICES PORTS
# ============================================================================

# GPU Agent Services
GPU_CONSENSUS_PORT=9092
GPU_EVOLUTION_PORT=9093
GPU_KNOWLEDGE_PORT=9094
GPU_SYNTHESIS_PORT=9095

# GPU Service Host
GPU_SERVICES_HOST=0.0.0.0

# ============================================================================
# DEMO CONFIGURATION
# ============================================================================

# Demo Environment
DEMO_MODE=development
DEMO_DURATION_MINUTES=30
DEMO_AUTO_RESTART=true

# Demo Scenario Defaults
DEMO_NODE_COUNT=3
DEMO_GPU_NODES=1
DEMO_CPU_NODES=2
DEMO_SIMULATED_NODES=true

# Performance Targets
DEMO_TARGET_GPU_UTILIZATION=85.0
DEMO_TARGET_CONSENSUS_LATENCY_US=1000
DEMO_TARGET_THROUGHPUT_TASKS_PER_SEC=10000

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================

# React Development Server
VITE_API_BASE_URL=http://${STRATOSWARM_HOST_IP}:${VISUAL_EDITOR_PORT}
VITE_WEBSOCKET_URL=ws://${STRATOSWARM_HOST_IP}:${WEBSOCKET_PORT}
VITE_GRAFANA_URL=http://${STRATOSWARM_HOST_IP}:${GRAFANA_PORT}
VITE_PROMETHEUS_URL=http://${STRATOSWARM_HOST_IP}:${PROMETHEUS_PORT}

# Frontend Build Configuration
VITE_NODE_ENV=production
VITE_BUILD_TARGET=es2020
VITE_APP_TITLE=StratoSwarm Visual Editor

# ============================================================================
# DOCKER CONFIGURATION
# ============================================================================

# Docker Compose Settings
COMPOSE_PROJECT_NAME=stratoswarm
COMPOSE_FILE=docker-compose.yml:docker-compose.override.yml

# Container Resource Limits
SWARMLET_MEMORY_LIMIT=2G
SWARMLET_CPU_LIMIT=2.0
GRAFANA_MEMORY_LIMIT=512M
PROMETHEUS_MEMORY_LIMIT=1G

# Volume Paths
STRATOSWARM_DATA_DIR=./data
STRATOSWARM_CONFIG_DIR=./config
STRATOSWARM_LOGS_DIR=./logs

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Authentication
STRATOSWARM_AUTH_ENABLED=false
STRATOSWARM_JWT_SECRET=your-secret-key-here
STRATOSWARM_SESSION_TIMEOUT=3600

# CORS Settings
STRATOSWARM_CORS_ENABLED=true
STRATOSWARM_CORS_ORIGINS=http://${STRATOSWARM_HOST_IP}:3000,http://localhost:3000

# API Security
SWARMLET_ALLOWED_COMMANDS=nvidia-smi,ps,top,free,df,docker
SWARMLET_COMMAND_TIMEOUT=300
SWARMLET_MAX_CONCURRENT_COMMANDS=10

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log Levels
RUST_LOG=info
STRATOSWARM_LOG_LEVEL=info
VITE_LOG_LEVEL=info

# Log Files
STRATOSWARM_LOG_FILE=${STRATOSWARM_LOGS_DIR}/stratoswarm.log
SWARMLET_LOG_FILE=${STRATOSWARM_LOGS_DIR}/swarmlet.log
DEMO_LOG_FILE=${STRATOSWARM_LOGS_DIR}/demo.log

# Log Retention
LOG_MAX_SIZE_MB=100
LOG_MAX_FILES=10
LOG_COMPRESS_OLD=true

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Thread Pools
TOKIO_WORKER_THREADS=8
RAYON_NUM_THREADS=8

# Memory Settings
MALLOC_ARENA_MAX=4
MALLOC_MMAP_THRESHOLD=65536

# Network Buffers
TCP_RMEM_DEFAULT=87380
TCP_WMEM_DEFAULT=65536

# ============================================================================
# DEVELOPMENT OVERRIDES
# ============================================================================

# Development Mode Settings (override above in .env.development)
# DEV_STRATOSWARM_HOST_IP=localhost
# DEV_VISUAL_EDITOR_PORT=3000
# DEV_GRAFANA_PORT=3001
# DEV_PROMETHEUS_PORT=9092

# ============================================================================
# PRODUCTION OVERRIDES  
# ============================================================================

# Production Mode Settings (override above in .env.production)
# PROD_STRATOSWARM_AUTH_ENABLED=true
# PROD_GRAFANA_PASSWORD=secure-password-here
# PROD_STRATOSWARM_CORS_ORIGINS=https://stratoswarm.yourdomain.com
# PROD_LOG_LEVEL=warn

# ============================================================================
# MULTI-NODE CLUSTER CONFIGURATION
# ============================================================================

# Cluster Setup (for distributed demos)
CLUSTER_COORDINATOR_HOST=192.168.1.4
CLUSTER_COORDINATOR_PORT=7946
CLUSTER_TOKEN=demo-cluster-token-12345

# Node Role
NODE_ROLE=coordinator  # coordinator, worker, observer
NODE_REGION=us-east-1
NODE_DATACENTER=primary

# Discovery
ENABLE_NODE_DISCOVERY=true
DISCOVERY_METHOD=multicast  # multicast, consul, etcd, kubernetes
DISCOVERY_INTERVAL_SEC=30

# ============================================================================
# CLOUD PROVIDER CONFIGURATION (Optional)
# ============================================================================

# AWS Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# GCP Configuration  
GOOGLE_CLOUD_PROJECT=
GOOGLE_APPLICATION_CREDENTIALS=

# Azure Configuration
AZURE_SUBSCRIPTION_ID=
AZURE_RESOURCE_GROUP=

# ============================================================================
# EXPERIMENTAL FEATURES
# ============================================================================

# Feature Flags
ENABLE_TIME_TRAVEL_DEBUG=true
ENABLE_AI_ASSISTANT=true
ENABLE_EVOLUTION_VISUALIZATION=true
ENABLE_GPU_PROFILING=true

# Experimental APIs
ENABLE_GRAPHQL_SUBSCRIPTIONS=true
ENABLE_GRPC_SERVICES=false
ENABLE_WEBRTC_P2P=false

# ============================================================================
# MONITORING & ALERTING
# ============================================================================

# Metrics Collection
METRICS_INTERVAL_SEC=5
METRICS_RETENTION_HOURS=168  # 7 days
ENABLE_CUSTOM_METRICS=true

# Alerting
ENABLE_ALERTING=true
ALERT_WEBHOOK_URL=
ALERT_EMAIL_SMTP_HOST=
ALERT_EMAIL_FROM=alerts@stratoswarm.local

# Health Checks
HEALTH_CHECK_INTERVAL_SEC=30
HEALTH_CHECK_TIMEOUT_SEC=10
HEALTH_CHECK_RETRIES=3