# StratoSwarm Swarmlet Environment Configuration
# Copy this file to .env and modify the values for your deployment

# === REQUIRED CONFIGURATION ===

# Cluster admin token (get this from your cluster administrator)
SWARMLET_CLUSTER_TOKEN=your_cluster_admin_token_here

# Cluster coordinator address (hostname:port)
SWARMLET_CLUSTER_HOST=cluster.coordinator.com:7946

# === NODE CONFIGURATION ===

# Node name (defaults to container hostname if not set)
SWARMLET_NODE_NAME=edge-node-01

# Automatically join cluster on startup
SWARMLET_AUTO_JOIN=true

# Enable command execution capabilities
SWARMLET_COMMAND_EXEC=enabled

# === DOCKER IMAGE CONFIGURATION ===

# Docker image to use
SWARMLET_IMAGE=stratoswarm/swarmlet:latest

# Container name
SWARMLET_CONTAINER_NAME=stratoswarm-swarmlet

# Restart policy
SWARMLET_RESTART_POLICY=unless-stopped

# === NETWORK CONFIGURATION ===

# API port (for health checks and command execution)
SWARMLET_API_PORT=8080

# Metrics port (for Prometheus scraping)
SWARMLET_METRICS_PORT=9090

# Network subnet for swarmlet containers
SWARMLET_SUBNET=172.20.0.0/16

# === STORAGE CONFIGURATION ===

# Data directory (for persistent storage)
SWARMLET_DATA_DIR=./data

# Configuration directory
SWARMLET_CONFIG_DIR=./config

# SSH key directory (optional, for remote operations)
SSH_KEY_DIR=

# === RESOURCE LIMITS ===

# Maximum number of concurrent workloads
SWARMLET_MAX_WORKLOADS=10

# Memory limit for the swarmlet container
SWARMLET_MEMORY_LIMIT=1G

# CPU limit for the swarmlet container
SWARMLET_CPU_LIMIT=2.0

# Memory reservation (guaranteed minimum)
SWARMLET_MEMORY_RESERVATION=256M

# CPU reservation (guaranteed minimum)
SWARMLET_CPU_RESERVATION=0.5

# === LOGGING CONFIGURATION ===

# Log level (trace, debug, info, warn, error)
SWARMLET_LOG_LEVEL=info

# Log file path within container
SWARMLET_LOG_FILE=/data/swarmlet.log

# === SECURITY CONFIGURATION ===

# Comma-separated list of allowed commands (optional)
# If not set, uses default whitelist
SWARMLET_ALLOWED_COMMANDS=

# Command execution timeout in seconds
SWARMLET_COMMAND_TIMEOUT=300

# === HEALTH CHECK CONFIGURATION ===

# Health check interval
SWARMLET_HEALTH_INTERVAL=30s

# Health check timeout
SWARMLET_HEALTH_TIMEOUT=10s

# Health check retries before considering unhealthy
SWARMLET_HEALTH_RETRIES=3

# Health check start period (time to wait before first check)
SWARMLET_HEALTH_START_PERIOD=10s

# === TRAEFIK INTEGRATION (Optional) ===

# Enable Traefik reverse proxy integration
SWARMLET_TRAEFIK_ENABLE=false

# Hostname for Traefik routing
SWARMLET_HOSTNAME=swarmlet.local

# === MONITORING STACK (Optional) ===

# Prometheus port (when using monitoring profile)
PROMETHEUS_PORT=9091

# Grafana port (when using monitoring profile)  
GRAFANA_PORT=3000

# Grafana admin password
GRAFANA_PASSWORD=admin

# Loki port (when using logging profile)
LOKI_PORT=3100

# === DEVELOPMENT CONFIGURATION ===

# Swarmlet version label
SWARMLET_VERSION=latest

# === EXAMPLE CONFIGURATIONS FOR DIFFERENT DEPLOYMENTS ===

# Example 1: Home Lab Setup
# SWARMLET_NODE_NAME=homelab-rpi-01
# SWARMLET_API_PORT=8080
# SWARMLET_MEMORY_LIMIT=512M
# SWARMLET_CPU_LIMIT=1.0

# Example 2: Production Edge Node
# SWARMLET_NODE_NAME=prod-edge-us-west-01
# SWARMLET_API_PORT=8080
# SWARMLET_MEMORY_LIMIT=2G
# SWARMLET_CPU_LIMIT=4.0
# SWARMLET_LOG_LEVEL=warn

# Example 3: Development Setup
# SWARMLET_NODE_NAME=dev-test-node
# SWARMLET_LOG_LEVEL=debug
# SWARMLET_TRAEFIK_ENABLE=true
# SWARMLET_HOSTNAME=swarmlet.dev.local